var searchFunc=function(e,i,l){$.ajax({url:e,dataType:"xml",success:function(e){var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("link",this).attr("href")}}).get(),t=document.getElementById(i);if(t){var n=document.getElementById(l);t.addEventListener("input",function(){var v=[],m=function(e){var t,r,n=[];for(t=0;t<e.length;t++)for(r=t+1;r<e.length+1;r++)n.push(e.slice(t,r).join(" "));return n}(this.value.trim().toLowerCase().split(" ")).sort(function(e,t){return t.split(" ").length-e.split(" ").length});if(n.innerHTML="",!(this.value.trim().length<=0)&&(r.forEach(function(e){var t=0;e.title&&""!==e.title.trim()||(e.title="Untitled");var r=e.title.trim().toLowerCase(),n=r.toLowerCase(),i=e.content.trim().replace(/<style([\s\S]*?)<\/style>/gi,"").replace(/<script([\s\S]*?)<\/script>/gi,"").replace(/<figure([\s\S]*?)<\/figure>/gi,"").replace(/<\/div>/gi,"\n").replace(/<\/li>/gi,"\n").replace(/<li>/gi,"  *  ").replace(/<\/ul>/gi,"\n").replace(/<\/p>/gi,"\n").replace(/<br\s*[\/]?>/gi,"\n").replace(/<[^>]+>/gi,""),l=i.toLowerCase(),s=e.url,a=-1,c=-1,u=-1;if(""!==i&&m.forEach(function(e){a=n.indexOf(e),c=l.indexOf(e),(0<=a||0<=c)&&(t+=1,c<0&&(c=0),u<0&&(u=c))}),0<t){var o={};if(o.rank=t,o.str="<li><a href='"+s+"' class='search-result-title'>"+r+"</a>",0<=u){var g=u-20,f=u+80;g<0&&(g=0),0==g&&(f=100),f>i.length&&(f=i.length);var h=i.substr(g,f),p=new RegExp(m.join("|"),"gi");h=h.replace(p,function(e){return'<em class="search-keyword">'+e+"</em>"}),o.str+='<p class="search-result">'+h+"...</p>"}o.str+="</li>",v.push(o)}}),v.length)){v.sort(function(e,t){return t.rank-e.rank});for(var e='<ul class="search-result-list">',t=0;t<v.length;t++)e+=v[t].str;e+="</ul>",n.innerHTML=e}})}}})};